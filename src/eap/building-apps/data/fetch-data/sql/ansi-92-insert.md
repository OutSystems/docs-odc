---
guid: 22582d71-e681-4548-a658-ed3eabda5ed0
locale: en-us
summary: Learn to use INSERT and UPSERT statements in ANSI-92 queries to create or update records on external entities from OutSystems Developer Cloud (ODC).
figma: 
coverage-type:
  - apply
  - understand
topic:
app_type: mobile apps,reactive web apps
platform-version: odc
audience:
  - backend developers
  - full stack developers
  - tech leads
tags: sql statements,database operations,data insertion,record update
outsystems-tools:
  - odc studio
---

# INSERT and UPSERT statements in ANSI-92 queries

```sql
{ INSERT | UPSERT } INTO entity ( attribute [, attribute ]* )
VALUES ( expression [, expression ]* ) [, ( expression [, expression ]* ) ]*
```

## Insert

`INSERT` creates one or more new records in an entity on an external system.

One or more target attribute names must be specified. The attributes may be specified in any order but each attribute must only appear once in the list. The target attributes may be qualified (`{entity}.[attribute]`) and this is recommended to avoid potential issues when attributes are renamed in ODC Portal.

The `VALUES` clause must include one or more tuples containing values to set for the target attributes. The number of expressions in each `VALUES` tuple must match the number of target attributes. The expressions will be assigned to the target attributes in the same order from left to right. One record will be created in the entity for each tuple provided. Insertion of multiple records isn't supported for all external systems, refer to [Supported operations](#supported-operations) for more information.

If optional attributes (can be `NULL` or have a default value) are included in the target attributes and `VALUES` clause, then the provided values will be set on these attributes. If the attributes aren't included, then they will be set to `NULL`.

Attributes which use unsupported data types and attributes which are always generated by the external system cannot be inserted and shouldn't be included in the target attribute names or `VALUES` tuples.

An `INSERT` statement that inserts a single record into an entity with one or more primary key attributes may return a result containing the inserted values of those attributes. The behaviour varies between external systems, refer to [Returned Primary Key Attributes](#returned-primary-key-attributes) for more information.

An `INSERT` statement that inserts a single record into an entity which does not have primary key attributes won't return a result.

An `INSERT` statement that inserts multiple records into an entity will not return a result.

## Upsert

`UPSERT` creates or updates one or more records in an entity on an external system.

The syntax rules for attribute names and expressions in the `VALUES` clause are the same as for `INSERT`. Likewise, nullable attributes are optional in `UPSERT`.

`UPSERT` is only supported for entities which have a non-generated primary key. The primary key attributes must be included along with all other non-nullable attributes. For each `VALUES` tuple, if there is no matching record in the entity with the same primary key, then the record is created. Existing records with matching primary keys will be updated using the values specified.

`UPSERT` never returns a result.

<div class="info" markdown="1">

* The user configured on the connection must have permission to write to the entity in the external system.
* If the entity has mandatory attributes (`NOT NULL`) of an unsupported data type then it won't be possible to insert records.
* If the entity only contains generated attributes then it won't be possible to insert records.

</div>

## Examples

```sql
-- Insert a single record
INSERT INTO {entity} ({entity}.[attr1], {entity}.[attr2])
VALUES ('abc', @dynamic);

-- Insert multiple records
INSERT INTO {entity} ({entity}.[attr1], {entity}.[attr2])
VALUES ('abc', @dynamic), ('def', 'other');

-- Upsert a single record
UPSERT INTO {entity} ({entity}.[id], {entity}.[attribute])
VALUES (3, @dynamic);

-- Upsert multiple records
UPSERT INTO {entity} ({entity}.[id], {entity}.[attribute])
VALUES (3, @dynamic), (4, 'other');
```

## Supported operations { #supported-operations }

| Data source          | Insert (single) | Insert (multiple) | Upsert (single) | Upsert (multiple) |
|----------------------|-----------------|-------------------|-----------------|-------------------|
| Microsoft SQL Server | Yes             | Yes               | Yes             | Yes               |
| Oracle               | Yes             | Yes               | Yes             | Yes               |
| PostgreSQL           | Yes             | Yes               | Yes             | Yes               |
| Salesforce           | Yes             | Yes               | No              | No                |
| SAP OData            | Yes<sup>1</sup> | No                | No              | No                |

<sup>1</sup>: The entity must have a `POST` API. `INSERT` and `UPSERT` do not support writing to SAP OData Navigation Properties (`Record` attributes), please use the generated deep insert server actions for this use case instead.

## Returned primary key attributes { ##returned-primary-key-attributes }

| Data source          | Returned primary key attributes                                    |
|:---------------------|--------------------------------------------------------------------|
| Microsoft SQL Server | `IDENTITY` or `AS ... PERSISTED`                                   |
| Oracle               | `GENERATED ALWAYS AS ...`                                          |
| PostgreSQL           | `GENERATED ALWAYS AS IDENTITY` or `GENERATED ALWAYS AS ... STORED` |
| Salesforce           | Salesforce Record ID (`Id`)                                        |
| SAP OData            | OData Entity Key                                                   |
